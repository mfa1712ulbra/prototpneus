{
  "entities": {
    "Usuario": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Usuario",
      "type": "object",
      "description": "Entidade que armazena informações dos usuários do sistema.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Identificador único para o usuário."
        },
        "nome": {
          "type": "string",
          "description": "Nome completo do usuário."
        },
        "email": {
          "type": "string",
          "description": "Endereço de email do usuário.",
          "format": "email"
        },
        "tipo": {
          "type": "string",
          "description": "Tipo de usuário (gerente ou técnico)."
        }
      },
      "required": [
        "id",
        "nome",
        "email",
        "tipo"
      ]
    },
    "Veiculo": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Veiculo",
      "type": "object",
      "description": "Entidade que armazena informações dos veículos.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Identificador único para o veículo."
        },
        "placa": {
          "type": "string",
          "description": "Número da placa do veículo."
        },
        "modelo": {
          "type": "string",
          "description": "Modelo do veículo."
        },
        "marca": {
          "type": "string",
          "description": "Marca do veículo."
        }
      },
      "required": [
        "id",
        "placa",
        "modelo",
        "marca"
      ]
    },
    "Pneu": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Pneu",
      "type": "object",
      "description": "Entidade que armazena informações dos pneus.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Identificador único para o pneu."
        },
        "veiculoId": {
          "type": "string",
          "description": "Referência para o Veiculo. (Relacionamento: Veiculo 1:N Pneu)"
        },
        "posicao": {
          "type": "string",
          "description": "Posição do pneu no veículo (ex: dianteiro esquerdo)."
        },
        "pressao": {
          "type": "number",
          "description": "Pressão atual do pneu."
        },
        "profundidade": {
          "type": "number",
          "description": "Profundidade do piso do pneu."
        },
        "observacoes": {
          "type": "string",
          "description": "Observações sobre o pneu."
        }
      },
      "required": [
        "id",
        "posicao",
        "pressao",
        "profundidade"
      ]
    },
    "Movimentacao": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Movimentacao",
      "type": "object",
      "description": "Entidade que armazena o histórico de movimentações dos pneus.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Identificador único para a movimentação."
        },
        "pneuId": {
          "type": "string",
          "description": "Referência para o Pneu. (Relacionamento: Pneu 1:N Movimentacao)"
        },
        "data": {
          "type": "string",
          "description": "Data da movimentação.",
          "format": "date-time"
        },
        "tipo": {
          "type": "string",
          "description": "Tipo de movimentação (ex: rotação, recapagem, descarte)."
        },
        "descricao": {
          "type": "string",
          "description": "Descrição da movimentação."
        }
      },
      "required": [
        "id",
        "pneuId",
        "data",
        "tipo"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/usuarios/{usuarioId}",
        "definition": {
          "entityName": "Usuario",
          "schema": {
            "$ref": "#/backend/entities/Usuario"
          },
          "description": "Armazena informações dos usuários do sistema.",
          "params": [
            {
              "name": "usuarioId",
              "description": "Identificador único do usuário."
            }
          ]
        }
      },
      {
        "path": "/usuarios/{usuarioId}/veiculos/{veiculoId}",
        "definition": {
          "entityName": "Veiculo",
          "schema": {
            "$ref": "#/backend/entities/Veiculo"
          },
          "description": "Armazena informações dos veículos de cada usuário.",
          "params": [
            {
              "name": "usuarioId",
              "description": "Identificador único do usuário."
            },
            {
              "name": "veiculoId",
              "description": "Identificador único do veículo."
            }
          ]
        },
        "subcollections": [
          {
            "path": "pneus/{pneuId}",
            "definition": {
              "entityName": "Pneu",
              "schema": {
                "$ref": "#/backend/entities/Pneu"
              },
              "description": "Armazena informações dos pneus de cada veículo.",
              "params": [
                {
                  "name": "pneuId",
                  "description": "Identificador único do pneu."
                }
              ]
            }
          }
        ]
      },
      {
        "path": "/usuarios/{usuarioId}/pneus/{pneuId}/movimentacoes/{movimentacaoId}",
        "definition": {
          "entityName": "Movimentacao",
          "schema": {
            "$ref": "#/backend/entities/Movimentacao"
          },
          "description": "Armazena o histórico de movimentações dos pneus. Garante o relacionamento 1:N entre pneus e movimentações.",
          "params": [
            {
              "name": "usuarioId",
              "description": "Identificador único do usuário."
            },
            {
              "name": "pneuId",
              "description": "Identificador único do pneu."
            },
            {
              "name": "movimentacaoId",
              "description": "Identificador único da movimentação."
            }
          ]
        }
      }
    ],
    "reasoning": "A estrutura do Firestore foi projetada para ser simples e eficiente para o aplicativo PrototPneus, priorizando a propriedade dos dados e regras de segurança claras. Os veículos são uma subcoleção de usuários, e os pneus são uma subcoleção de veículos, criando uma hierarquia natural que simplifica as permissões. Cada usuário só pode acessar seus próprios dados."
  }
}
